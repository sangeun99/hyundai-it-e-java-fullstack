# 2장: 도커의 동작 원리

## 01 도커의 동작 원리

- 운영체제 위에 도커 엔진이 동작하고, 그 위에서 컨테이너가 동작
- 운영체제
    - 소프트웨어나 프로그램의 명령을 (하드웨어가 알아들을 수 있게 번역하여) 하드웨어에 전달하는 역할

## 02 도커 허브와 이미지, 그리고 컨테이너

- 이미지로부터 컨테이너를 생성
- 하나의 이미지로부터 여러 개의 컨테이너 생성 가능
    - 이 컨테이너들은 완전히 똑같음
- 컨테이너로부터 이미지를 생성할 수도 있다
- 도커 허브에서 공개된 이미지를 얻을 수 있다
    - [hub.docker.com](http://hub.docker.com)
- 한 컨테이너에 하나의 프로그램을 넣을 수도 있고, 한 컨테이너에 모든 프로그램을 넣을 수도 있음
    - 도커의 사용 목적에는 한 컨테이너에 하나의 프로그램을 넣는 편이 적합

## 03 도커 컨테이너의 생애주기와 데이터 저장

- 컨테이너는 쓰고 버리는 일회용품
- 컨테이너는 쉽게 만들 수 있음
    - 하나를 업데이트하면서 계속 사용하기보다는 업데이트된 소프트웨어가 들어있는 새로운 컨테이너를 사용하는 것이 좋음
- 컨테이너의 생애주기
    - 만들고
    - 실행하고
    - 종료하고
    - 폐기한 다음
    - 다시 컨테이너를 만들음

### 데이터 저장

- 컨테이너를 폐기하면 모든 정보가 소실됨
- 데이터 저장을 위해 도커가 설치된 물리적 서버(호스트)의 디스크를 마운트해 데이터 저장

## 04 도커의 장점과 단점

### 도커의 성질

- 환경을 격리할 수 있음
    - 독립된 환경
        - (프로그램을) 여러 개 띄울 수 있음
    - 이미지를 만들 수 있음
        - 도커 허브
            - 이미지를 내려받기만 하면 됨
            - 교체하기 쉬움
        - 이동이 편리함
    - 커널이 없음
        - 가벼움
        - 배포판을 바꿀 수 있음

### 도커의 장점

- 한 대의 물리 서버에 여러 대의 서버를 띄울 수 있다
- 서버 관리가 용이하다
- 서버 고수가 아니어도 다루기 쉽다

### 도커의 단점

- 리눅스용 소프트웨어만 지원한다
- 호스트 서버에 문제가 생기면 모든 컨테이너에 영향이 미친다
- 컨테이너를 하나 밖에 사용하지 않는다면 큰 장점을 느끼기 어렵다

### 도커의 주용도

- 팀원 모두에게 동일한 개발환경 제공
- 새로운 버전의 테스트
    - 격리된 환경을 이용
- 동일한 서버가 여러 대 필요한 경우
    - 컨테이너 밖과 독립된 성질을 이용